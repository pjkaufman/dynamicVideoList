{% extends 'videos.html.twig' %}

{% block videoSelect %}
{% endblock %}

{% block languageSelect %}
{% endblock %}

{% block javascriptFunctions %}
<script src="..\assets\js\subtitles.js" defer></script>
{% endblock %}

{% block inlineScript %}
<script>
  Window.Vinya = {
    defLang: '{{~grav.language.getActive~}}',
    videoLanguage: '{{ page.header.videoLanguage }}',
    videoTitle: '{{ page.header.videoTitle }}'
    };
  Object.assign(Window.Vinya, {'errorMsg': '{{ page.header.error }}'});
  {% for video in config.video.videos %}
    Object.assign(Window.Vinya, {'{{ video.name }}': {} })
    {% for id in video.ids %}
      Object.assign(Window.Vinya['{{ video.name }}'], { {{ id.language }}: {{ id.id }}});
    {% endfor %}
  {% endfor %}
  Window.Vinya.URLParams = { 
    time: "time",
    sub: "sub"
  };
  // this function runs itself
  (function(){
    var lastParams = localStorage.getItem('subParams');
    // add the appropriate params to the website if they exist
    if (lastParams != undefined && window.location.search === '' && !window.location.href.includes(lastParams)) {
     window.location.search = lastParams;
    }
  })();
</script>
{% endblock %}
